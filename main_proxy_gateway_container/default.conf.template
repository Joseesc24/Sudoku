upstream searcher_servers {
    server ${SEARCHER_SERVER_1} weight=8 max_fails=1 fail_timeout=20s;
    server ${SEARCHER_SERVER_2} weight=8 max_fails=1 fail_timeout=20s;
    server ${SEARCHER_SERVER_3} backup;
}

server {
    listen ${ACCESS_PORT};

    location ~ ^/(hill_climbing|genetic_algorithm|simulated_annealing|neuronal_network) {
        proxy_pass http://searcher_servers;
        proxy_pass_request_headers on;
        proxy_pass_request_body on;
    }
}